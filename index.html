<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Trainer UI Kit Showcase</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Open+Sans:wght@300;400;600;700&family=Comfortaa:wght@400;600;700&family=Karla:wght@400;700&family=Inter:wght@300;400;500;600;700&family=Roboto+Condensed:wght@700&family=Nunito:wght@300;400;600;700&family=Lora:ital,wght@0,400;0,600;1,400&family=Source+Sans+Pro:wght@400;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="assets/css/main.css">
    <!-- Link ALL theme files that will be switchable -->
    <link rel="stylesheet" href="assets/css/themes/theme-modern-professional.css">
    <link rel="stylesheet" href="assets/css/themes/theme-friendly-supportive.css">
    <link rel="stylesheet" href="assets/css/themes/theme-energetic-motivating.css"> <!-- Create this file -->
    <link rel="stylesheet" href="assets/css/themes/theme-natural-grounded.css">   <!-- Create this file -->
    <style>
        body {
            margin: 0;
            /* background-color: #e9e9e9; Now handled by the #themed-area wrapper */
            color: #333; /* Fallback */
            /* Padding for fixed mobile nav will be in main.css */
        }

        .page-header {
            padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
            background-color: #f0f0f0; /* Neutral header background */
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky; /* Make header sticky */
            top: 0;
            z-index: 1010; /* Above mobile nav if it ever overlaps */
        }
        h1.page-title {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.5em; /* Smaller for a header bar */
            color: #333;
            margin: 0;
            padding: 0;
        }
        .theme-selector-container {
            display: flex;
            align-items: center;
        }
        .theme-selector-container label {
            margin-right: var(--spacing-sm, 8px);
            font-size: 0.9em;
            color: #555;
        }
        #theme-switcher {
            padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
            border-radius: var(--border-radius-sm, 4px);
            border: 1px solid #ccc;
            font-size: 0.9em;
            background-color: #fff;
        }

        #themed-area { /* This div will get the theme class */
            min-height: 100vh; /* Ensure it takes at least full height */
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease; /* Smooth theme transition */
             /* Apply theme's background and text color */
            background: var(--background-color);
            color: var(--text-color);
        }

        .theme-showcase-layout {
            display: flex;
            min-height: calc(100vh - 60px); /* Adjust 60px based on header height */
        }
        
        .theme-showcase-content {
            flex-grow: 1;
            padding: var(--spacing-xl, 40px);
            overflow-y: auto;
        }
        .theme-showcase-content h2.theme-section-title {
            /* This title is less relevant now or needs a new purpose */
            display: none; /* Hide for now, can repurpose */
        }
        .component-group {
            margin: 0 0 var(--spacing-xl, 40px) 0;
            padding: var(--spacing-lg, 24px);
            max-width: 800px;
            border-radius: var(--border-radius-lg, 8px);
            background-color: var(--surface-color);
            box-shadow: var(--shadow-lg);
        }

        .pt-sidebar__nav-icon, .pt-sidebar__user-avatar {
            font-style: normal;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        /* --- MOBILE OVERRIDES (general, specific mobile nav style in _components.css) --- */
        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                padding: var(--spacing-sm);
            }
            h1.page-title {
                font-size: 1.2em;
                margin-bottom: var(--spacing-sm);
            }
            .theme-selector-container {
                width: 100%;
            }
            #theme-switcher {
                width: 100%;
            }

            .theme-showcase-layout .pt-sidebar { /* Hide desktop sidebar on mobile */
                 display: none !important;
            }
            .theme-showcase-layout {
                flex-direction: column;
            }
            .theme-showcase-content {
                padding: var(--spacing-md);
                /* No margin-bottom needed here, body will have padding-bottom for fixed mobile nav */
            }
            .component-group {
                max-width: 100%;
                padding: var(--spacing-md);
            }
        }
        /* --- DESKTOP SIDEBAR STICKY --- */
        @media (min-width: 769px) {
            .theme-showcase-layout .pt-sidebar {
                height: calc(100vh - 60px); /* Adjust 60px if header height changes */
                position: sticky;
                top: 60px; /* Stick below the sticky header */
                flex-shrink: 0;
            }
        }
    </style>
</head>
<body>

    <header class="page-header">
        <h1 class="page-title">PT UI Kit</h1>
        <div class="theme-selector-container">
            <label for="theme-switcher">Theme:</label>
            <select id="theme-switcher">
                <!-- Options will be populated by JS -->
            </select>
        </div>
    </header>

    <div id="themed-area"> <!-- Default theme class will be applied by JS -->
        <div class="theme-showcase-layout">
            <div id="sidebar-container">
                <!-- Sidebar HTML will be injected here -->
            </div>
            <main class="theme-showcase-content">
                <!-- <h2 class="theme-section-title">Components Showcase</h2> NO LONGER NEEDED PER SECTION -->
                <div class="component-group" id="main-components-container">
                    <!-- Main components will be injected here -->
                </div>
            </main>
        </div>
    </div>

    <div id="mobile-nav-global-container">
        <!-- Global Mobile Nav HTML will be injected here -->
    </div>

       <script>
        const themes = [
            { value: 'theme-modern-professional', name: 'Modern & Professional', sidebarLogo: 'ProTrain', sidebarUser: 'Alex P.' },
            { value: 'theme-friendly-supportive', name: 'Friendly & Supportive', sidebarLogo: 'WellFit', sidebarUser: 'Sam K.' },
            // NEW THEMES ADDED BELOW
            { value: 'theme-energetic-motivating', name: 'Energetic & Motivating', sidebarLogo: 'IgniteFit', sidebarUser: 'Max Power' },
            { value: 'theme-natural-grounded', name: 'Natural & Grounded', sidebarLogo: 'TerraFit', sidebarUser: 'Willow G.' },
            { value: 'theme-luxe-minimalist', name: 'Luxe Minimalist', sidebarLogo: 'ELEVATE', sidebarUser: 'Kendall R.' },
            { value: 'theme-retro-funk', name: 'Retro Funk', sidebarLogo: 'GrooveFit', sidebarUser: 'DJ Flex' }
        ];

        // ... (getSidebarHTML, getMobileNavHTML, getMainContentHTML functions remain the same) ...
        // No changes to the HTML generating functions needed for this fix

        document.addEventListener('DOMContentLoaded', () => {
            const themeSwitcher = document.getElementById('theme-switcher');
            const themedArea = document.getElementById('themed-area');
            const sidebarContainer = document.getElementById('sidebar-container');
            const mainComponentsContainer = document.getElementById('main-components-container');
            const mobileNavGlobalContainer = document.getElementById('mobile-nav-global-container'); // Get this container

            // Populate theme switcher
            themes.forEach(theme => {
                const option = document.createElement('option');
                option.value = theme.value;
                option.textContent = theme.name;
                themeSwitcher.appendChild(option);
            });

            // Function to apply theme and content
            function applyTheme(themeValue) {
                // Remove old theme classes
                themedArea.className = ''; 
                if (mobileNavGlobalContainer.firstChild) { // If mobile nav exists
                     mobileNavGlobalContainer.firstChild.className = 'pt-mobile-nav-banner'; // Reset its class first
                }


                // Add new theme class to themed area and mobile nav container/banner
                themedArea.classList.add(themeValue);
                if (mobileNavGlobalContainer.firstChild) {
                    mobileNavGlobalContainer.firstChild.classList.add(themeValue); // Apply theme to the banner itself
                }


                // Find theme object
                const currentTheme = themes.find(t => t.value === themeValue);
                if (currentTheme) {
                    if (sidebarContainer) {
                       sidebarContainer.innerHTML = getSidebarHTML(currentTheme.sidebarLogo, currentTheme.sidebarUser);
                    }
                }
                // Re-apply base class for styling from _variables and body vars
                // This ensures that CSS variables cascade correctly
                themedArea.style.background = ''; // Clear inline style, let CSS class handle it
                themedArea.style.color = '';    // Clear inline style

                 // Trigger re-flow for mobile nav if variables inside it change.
                 // This might not be strictly necessary but can sometimes help.
                if (mobileNavGlobalContainer.firstChild) {
                    mobileNavGlobalContainer.firstChild.style.display = 'none';
                    mobileNavGlobalContainer.firstChild.offsetHeight; // Trigger reflow
                    mobileNavGlobalContainer.firstChild.style.display = '';
                }
            }

            // Set initial theme and content
            if (themes.length > 0) {
                // Initial content injection
                if (mainComponentsContainer) mainComponentsContainer.innerHTML = getMainContentHTML(themes[0].value);
                if (mobileNavGlobalContainer) mobileNavGlobalContainer.innerHTML = getMobileNavHTML();
                
                applyTheme(themes[0].value); // Apply the first theme by default (NOW AFTER mobile nav is created)
            }


            // Event listener for theme switcher
            themeSwitcher.addEventListener('change', (event) => {
                applyTheme(event.target.value);
                setupActiveLinkSwitcher(); 
            });

            function setupActiveLinkSwitcher() {
                // ... (active link switcher code remains the same) ...
                document.querySelectorAll('.pt-sidebar__nav-link, .pt-mobile-nav-banner__link').forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        let parentNavList;
                        if (this.classList.contains('pt-sidebar__nav-link')) {
                            parentNavList = this.closest('.pt-sidebar__nav-list');
                        } else if (this.classList.contains('pt-mobile-nav-banner__link')) {
                            parentNavList = this.closest('.pt-mobile-nav-banner__scroll-container');
                        }
                        if (parentNavList) {
                            parentNavList.querySelectorAll('.is-active').forEach(el => el.classList.remove('is-active'));
                            this.classList.add('is-active');
                        }
                    });
                });
            }
            setupActiveLinkSwitcher(); // Initial setup
        });
    </script>
    <script src="assets/js/main.js"></script> <!-- Keep your global JS link -->
</body>
</html>
